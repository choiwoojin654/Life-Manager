<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moa Now - ìƒí™œ ì‹¤ì²œ ì•±</title>
    <style>
        /* [Design System] */
        :root {
            --primary-lime: #D0FF46;
            --bg-gray: #F7F8FA;
            --text-main: #111111;
            --text-sub: #767676;
            --white: #FFFFFF;
            --card-shadow: 0 8px 20px rgba(0,0,0,0.04);
            --danger: #FF5252;
            --modal-bg: rgba(0, 0, 0, 0.6);
            
            /* Score Colors */
            --color-sleep: #4e8cff;
            --color-focus: #ff8e3c;
            --color-routine: #9c67ff;
            --color-detox: #2ecc71;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; -webkit-font-smoothing: antialiased; }
        body { background-color: #e5e5e5; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: var(--text-main); }

        /* SVG Icon Utility */
        .icon-svg { width: 24px; height: 24px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
        .icon-sm { width: 18px; height: 18px; }

        /* Mobile Frame */
        .mobile-frame {
            width: 375px; height: 812px; background-color: var(--bg-gray); border-radius: 40px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.12); overflow: hidden; position: relative;
            border: 8px solid #1a1a1a; display: flex; flex-direction: column;
        }

        .status-bar { padding: 15px 25px; display: flex; justify-content: space-between; font-size: 14px; font-weight: 600; background: var(--bg-gray); z-index: 10; }
        .content-area { flex: 1; overflow-y: auto; padding: 0 20px 100px; scroll-behavior: smooth; }
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Header & Logo */
        .header-row { display: flex; justify-content: space-between; align-items: center; margin: 10px 0 20px; position: relative; z-index: 2; }
        .logo-container { position: relative; display: inline-block; }
        h1.page-title { font-size: 26px; font-weight: 800; letter-spacing: -0.5px; position: relative; z-index: 2; margin: 0; }
        .blob-line { position: absolute; bottom: 2px; left: 0; width: 100%; height: 8px; background-color: var(--primary-lime); opacity: 0.5; z-index: -1; transform: skewX(-10deg); }
        .deco-blob { position: absolute; background-color: var(--primary-lime); border-radius: 50%; z-index: -1; }
        .blob-1 { width: 30px; height: 30px; top: -8px; right: -12px; opacity: 0.8; }
        .noti-btn { cursor: pointer; padding: 5px; position: relative; }
        .noti-dot { position: absolute; top: 5px; right: 5px; width: 8px; height: 8px; background: var(--danger); border-radius: 50%; border: 1px solid var(--bg-gray); }

        /* Sidebar */
        .sidebar-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 150; display: none; opacity: 0; transition: opacity 0.3s; }
        .sidebar-overlay.active { display: block; opacity: 1; }
        .sidebar { position: absolute; top: 0; right: -320px; width: 280px; height: 100%; background: var(--white); z-index: 160; padding: 25px 20px; transition: right 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); display: flex; flex-direction: column; box-shadow: -5px 0 20px rgba(0,0,0,0.1); }
        .sidebar.active { right: 0; }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-top: 20px; }
        .noti-item { padding: 15px 0; border-bottom: 1px solid #f0f0f0; display: flex; gap: 12px; align-items: flex-start; }
        .noti-icon-box { width: 36px; height: 36px; background: #F0F2F5; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }

        /* Modal Styles */
        .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--modal-bg); z-index: 200; display: none; justify-content: center; align-items: center; animation: fadeIn 0.2s ease; }
        .modal-box { background: white; width: 85%; padding: 25px; border-radius: 24px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.2); transform: scale(0.9); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes popIn { to { transform: scale(1); } }
        .modal-title { font-size: 18px; font-weight: 700; margin-bottom: 10px; }
        .modal-desc { font-size: 14px; color: #666; margin-bottom: 20px; line-height: 1.4; }
        .modal-btns { display: flex; gap: 10px; justify-content: center; }
        .modal-btn { flex: 1; padding: 12px; border-radius: 14px; border: none; font-weight: 700; cursor: pointer; font-size: 14px; }
        .btn-cancel { background: #f0f0f0; color: #666; }
        .btn-confirm { background: var(--primary-lime); color: var(--text-main); }
        .checkmark-circle { width: 50px; height: 50px; border-radius: 50%; background: var(--primary-lime); display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; }
        .checkmark { color: var(--text-main); font-size: 24px; }
        
        /* History List Modal */
        .quick-action-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; max-height: 300px; overflow-y: auto; }
        .quick-action-item { background: #f9f9f9; padding: 15px; border-radius: 16px; display: flex; align-items: center; gap: 15px; border: 1px solid transparent; transition: all 0.2s; cursor: default; }
        .qa-icon { font-size: 24px; }
        .qa-text { font-weight: 600; font-size: 15px; }

        /* FAB */
        .fab-btn { position: absolute; bottom: 110px; right: 25px; width: 60px; height: 60px; background: var(--primary-lime); color: var(--text-main); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 300; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 50; cursor: pointer; transition: transform 0.2s; }
        .fab-btn:active { transform: scale(0.9); }

        /* Login Screen */
        #login-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--white); z-index: 3000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; transition: opacity 0.5s ease, transform 0.5s ease; }
        .login-logo-area { position: relative; margin-bottom: 60px; text-align: center; }
        .login-logo-text { font-size: 36px; font-weight: 900; letter-spacing: -1px; position: relative; z-index: 2; }
        .login-btn-group { width: 100%; display: flex; flex-direction: column; gap: 12px; margin-bottom: 30px; }
        .login-btn { width: 100%; padding: 16px; border-radius: 16px; border: none; font-weight: 600; font-size: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; position: relative; transition: transform 0.1s; }
        .login-btn:active { transform: scale(0.98); }
        .btn-kakao { background-color: #FEE500; color: #000000; }
        .btn-google { background-color: #FFFFFF; color: #000000; border: 1px solid #eee; }
        .btn-apple { background-color: #000000; color: #FFFFFF; }
        .btn-email { background-color: var(--primary-lime); color: var(--text-main); }
        .guest-login { font-size: 13px; color: #888; text-decoration: underline; cursor: pointer; margin-bottom: 30px; }
        .policy-check { display: flex; align-items: center; gap: 8px; font-size: 13px; color: #555; }
        .policy-checkbox { width: 18px; height: 18px; accent-color: var(--primary-lime); cursor: pointer; }

        /* [HOME Styles] */
        /* [UPDATED] Main Score Card - White with Animated Ring */
        .main-score-card-new { 
            background: var(--white); 
            border-radius: 26px; 
            padding: 30px 20px; 
            margin-bottom: 25px; 
            box-shadow: var(--card-shadow); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            position: relative;
            overflow: hidden;
        }

        .main-score-title { font-size: 16px; color: var(--text-sub); margin-bottom: 20px; font-weight: 600; letter-spacing: 0.5px; z-index: 2; }
        
        .main-gauge-container { position: relative; width: 160px; height: 160px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px; z-index: 2; }
        
        /* Animated Ring around gauge */
        .main-gauge-container::before {
            content: '';
            position: absolute;
            top: -8px; left: -8px; right: -8px; bottom: -8px;
            border-radius: 50%;
            background: conic-gradient(from 0deg, transparent 0%, var(--primary-lime) 30%, transparent 60%);
            -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff calc(100% - 2px));
            mask: radial-gradient(farthest-side, transparent calc(100% - 2px), #fff calc(100% - 2px));
            animation: rotateAround 4s linear infinite;
            z-index: -1;
            opacity: 0.7;
        }
        @keyframes rotateAround { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .main-gauge-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
        .main-gauge-bg { fill: none; stroke: #f0f0f0; stroke-width: 10; stroke-linecap: round; }
        .main-gauge-fill { 
            fill: none; 
            stroke: var(--primary-lime); 
            stroke-width: 10; 
            stroke-linecap: round; 
            stroke-dasharray: 440; 
            stroke-dashoffset: 440; 
            animation: fillMainGauge 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; 
        }
        @keyframes fillMainGauge { to { stroke-dashoffset: 158; } }
        
        .main-score-value { position: absolute; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .score-num-big { font-size: 52px; font-weight: 800; color: var(--text-main); line-height: 1; }
        .score-unit-text { font-size: 16px; font-weight: 600; color: var(--text-sub); margin-top: -5px; }
        
        /* Trend Badge */
        .score-trend-badge { 
            background: rgba(208, 255, 70, 0.15); 
            color: #7da800; /* Slightly darker lime for readability on white */
            padding: 6px 14px; 
            border-radius: 20px; 
            font-size: 13px; 
            display: flex; align-items: center; gap: 4px; font-weight: 700; 
            margin-top: 10px;
            z-index: 2;
        }

        .now-card { background-color: var(--text-main); color: var(--white); border-radius: 24px; padding: 25px; margin-bottom: 25px; box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .now-badge { background: var(--primary-lime); color: var(--text-main); padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; display: inline-block; margin-bottom: 15px; }
        .now-title { font-size: 18px; font-weight: 700; line-height: 1.4; margin-bottom: 20px; }
        .action-btn { background: var(--primary-lime); color: var(--text-main); width: 100%; padding: 14px; border-radius: 14px; border: none; font-weight: 700; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: transform 0.1s; }
        
        /* Now Feed Done State */
        .now-card.done-state { background-color: #E8F5E9; color: #2E7D32; border: 2px solid var(--primary-lime); }
        .now-card.done-state .now-badge { background-color: #2E7D32; color: white; }
        .now-card.done-state .action-btn { background-color: #2E7D32; color: white; cursor: default; }

        .section-title { margin: 30px 0 15px; font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 8px; }
        .list-item-card { background: white; padding: 16px 20px; border-radius: 18px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.02); cursor: pointer; transition: transform 0.1s; }
        .list-content { display: flex; align-items: center; gap: 12px; flex: 1; }
        .delete-btn { color: #ff5252; opacity: 0.4; padding: 8px; cursor: pointer; transition: opacity 0.2s; }
        .delete-btn:hover { opacity: 1; }

        /* [ROUTINE Styles] */
        .routine-week-tracker { background: white; border-radius: 20px; padding: 15px; margin-bottom: 20px; box-shadow: var(--card-shadow); display: flex; justify-content: space-between; }
        .week-day-col { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; width: 40px; }
        .wd-name { font-size: 11px; color: #999; }
        .wd-circle { width: 32px; height: 32px; border-radius: 50%; background: #f5f5f5; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; transition: all 0.2s; }
        .wd-circle.filled { background: var(--primary-lime); color: var(--text-main); border: 2px solid var(--primary-lime); }
        .week-day-col.selected .wd-name { color: var(--text-main); font-weight: 700; }
        .week-day-col.selected .wd-circle { border: 2px solid #111; transform: scale(1.1); }

        .routine-dashboard { background: #1a1a1a; color: white; border-radius: 24px; padding: 30px 20px; margin-bottom: 30px; text-align: center; position: relative; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .routine-progress-outer { width: 120px; height: 120px; margin: 0 auto 15px; border-radius: 50%; background: conic-gradient(var(--primary-lime) 75%, #333 0); display: flex; align-items: center; justify-content: center; position: relative; }
        .routine-progress-inner { width: 100px; height: 100px; background: #1a1a1a; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: absolute; }
        .emoji-center { font-size: 40px; z-index: 2; }
        
        .routine-list-item { background: white; padding: 15px 20px; border-radius: 18px; display: flex; align-items: center; margin-bottom: 12px; box-shadow: var(--card-shadow); }
        .routine-icon { width: 44px; height: 44px; background: #F0F2F5; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-right: 15px; }
        .routine-info { flex: 1; }
        .routine-name { font-size: 15px; font-weight: 600; margin-bottom: 2px; transition: color 0.2s; }
        .routine-time { font-size: 12px; color: #888; }
        
        /* Play/Stop Button */
        .play-btn { width: 34px; height: 34px; border-radius: 50%; background: #f0f0f0; color: #ccc; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; flex-shrink: 0; margin-left:10px; }
        .play-btn.completed { background: var(--primary-lime); color: var(--text-main); } 
        .routine-list-item.done .routine-name { text-decoration: line-through; color: #aaa; }

        /* Add Routine Input */
        .add-box { background: white; padding: 10px; border-radius: 16px; display: flex; gap: 8px; margin-bottom: 20px; box-shadow: var(--card-shadow); }
        .add-time-input { width: 35%; border: none; background: #f5f5f5; padding: 12px 10px; border-radius: 10px; outline: none; font-size: 13px; font-family: inherit; text-align: center; }
        .add-text-input { flex: 1; border: none; background: #f5f5f5; padding: 12px 10px; border-radius: 10px; outline: none; font-size: 14px; }
        .add-select { width: 100%; border: none; background: #f5f5f5; padding: 12px 10px; border-radius: 10px; outline: none; font-size: 14px; margin-bottom: 10px; }
        .add-btn { width: 60px; background: var(--primary-lime); border: none; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--text-main); font-size: 28px; font-weight: 300; }

        /* [SCORE Styles] */
        .score-hero-dark { background: #222; border-radius: 28px; padding: 30px 25px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 15px 40px rgba(0,0,0,0.2); position: relative; overflow: hidden; margin-bottom: 25px; }
        .score-hero-dark::after { content: ''; position: absolute; top: -50%; right: -20%; width: 200px; height: 200px; background: radial-gradient(circle, rgba(208, 255, 70, 0.15) 0%, rgba(0,0,0,0) 70%); border-radius: 50%; pointer-events: none; }
        .score-hero-left h2 { font-size: 14px; color: #aaa; margin-bottom: 8px; font-weight: 500; }
        .score-hero-left .big-score { font-size: 56px; font-weight: 800; line-height: 1; color: var(--white); display: flex; align-items: baseline; gap: 5px; }
        .score-hero-left .big-score span { font-size: 20px; color: var(--primary-lime); }
        .score-hero-left .score-change { display: inline-flex; align-items: center; gap: 5px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 20px; font-size: 12px; margin-top: 15px; color: var(--primary-lime); }

        .score-gauge-box { position: relative; width: 100px; height: 100px; }
        .score-gauge-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
        .gauge-bg { fill: none; stroke: #444; stroke-width: 8; }
        .gauge-fill { fill: none; stroke: var(--primary-lime); stroke-width: 8; stroke-linecap: round; stroke-dasharray: 251; stroke-dashoffset: 251; animation: fillGauge 1.2s ease-out forwards 0.3s; }
        @keyframes fillGauge { to { stroke-dashoffset: 90; } }

        .score-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 16px; border-radius: 20px; box-shadow: var(--card-shadow); }
        .stat-icon { width: 36px; height: 36px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px; font-size: 18px; }
        .stat-name { font-size: 13px; color: #888; margin-bottom: 6px; }
        .stat-val-row { display: flex; justify-content: space-between; align-items: flex-end; }
        .stat-val { font-size: 18px; font-weight: 700; color: #333; }
        .stat-bar-bg { width: 100%; height: 6px; background: #f0f0f0; border-radius: 3px; margin-top: 10px; overflow: hidden; }
        .stat-bar-fill { height: 100%; border-radius: 3px; width: 0; transition: width 1s ease-out; }

        .trend-box { background: white; padding: 20px; border-radius: 24px; box-shadow: var(--card-shadow); margin-bottom: 25px; }
        .box-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .graph-area { display: flex; justify-content: space-between; align-items: flex-end; height: 100px; padding: 0 5px; }
        .graph-col { display: flex; flex-direction: column; align-items: center; gap: 8px; width: 30px; }
        .bar-bg { width: 12px; height: 80px; background: #f5f5f5; border-radius: 6px; display: flex; align-items: flex-end; overflow: hidden; }
        .bar-fill { width: 100%; background: var(--primary-lime); border-radius: 6px; height: 0; animation: growBar 0.8s ease-out forwards; }
        .day-label { font-size: 11px; color: #aaa; font-weight: 500; }
        @keyframes growBar { to { height: var(--h); } }

        .ai-box-new { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); padding: 20px; border-radius: 24px; display: flex; gap: 15px; align-items: flex-start; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.1); }
        .ai-icon-new { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #2E7D32; flex-shrink: 0; }
        .ai-text-new { font-size: 14px; color: #1B5E20; line-height: 1.5; }

        .ai-report-banner { background: linear-gradient(135deg, #222 0%, #333 100%); color: white; padding: 20px; border-radius: 20px; display: flex; align-items: center; gap: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); margin-top: 30px; cursor: pointer; margin-bottom: 20px; }
        .ai-report-icon { font-size: 24px; }
        .ai-report-text h4 { font-size: 15px; margin-bottom: 4px; font-weight: 700; color: var(--primary-lime); }
        .ai-report-text p { font-size: 12px; opacity: 0.8; margin: 0; }

        /* [MY PAGE Styles] */
        .profile-header { display: flex; align-items: center; padding: 10px 0 30px; }
        .profile-img { width: 64px; height: 64px; background-color: #e0e0e0; border-radius: 50%; margin-right: 15px; border: 3px solid var(--white); box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; color: #757575; }
        .menu-list { background: var(--white); border-radius: 24px; padding: 10px 20px; box-shadow: var(--card-shadow); margin-bottom: 20px; }
        .menu-item { display: flex; justify-content: space-between; align-items: center; padding: 18px 0; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
        .menu-left { display: flex; align-items: center; gap: 12px; font-size: 15px; font-weight: 500; }
        .menu-icon-box { width: 32px; height: 32px; background: #f9f9f9; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #555; }
        .my-sub-page { display: none; animation: fadeIn 0.2s; }
        .my-sub-page.active { display: block; }
        .header-back-btn { display: none; cursor: pointer; margin-right: 10px; }
        .setting-group { margin-bottom: 25px; }
        .setting-label { font-size: 13px; color: #888; margin-bottom: 8px; display: block; }
        .setting-input { width: 100%; padding: 15px; background: #f5f5f5; border: none; border-radius: 14px; font-size: 15px; outline: none; }
        .setting-btn { width: 100%; padding: 15px; background: var(--text-main); color: white; border: none; border-radius: 14px; font-weight: 700; cursor: pointer; margin-top: 10px; }
        .setting-btn.danger { background: #ffebee; color: var(--danger); }
        .toggle-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0; }
        .toggle-switch { position: relative; width: 44px; height: 24px; }
        .toggle-input { opacity: 0; width: 0; height: 0; }
        .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
        .toggle-input:checked + .toggle-slider { background-color: var(--primary-lime); }
        .toggle-input:checked + .toggle-slider:before { transform: translateX(20px); }

        /* [NEW] Premium Card Styles */
        .premium-card {
            background: linear-gradient(120deg, #1a1a1a 0%, #2c2c2c 100%);
            border-radius: 24px;
            padding: 20px 25px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid #333;
        }
        .premium-title-row {
            font-size: 18px;
            font-weight: 800;
            color: white;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pro-badge {
            background: var(--primary-lime);
            color: black;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 6px;
            font-weight: 800;
        }
        .premium-sub { font-size: 13px; color: #888; }
        .premium-card::before {
            content: 'ğŸ‘‘';
            position: absolute;
            right: -10px;
            bottom: -15px;
            font-size: 80px;
            opacity: 0.1;
            transform: rotate(-15deg);
        }

        /* [NEW] Profile Status */
        .profile-status { font-size: 14px; color: #555; margin-bottom: 4px; }

        /* Navigation */
        nav { height: 90px; background: var(--white); display: flex; justify-content: space-around; padding-top: 12px; border-top: 1px solid #eee; border-radius: 30px 30px 0 0; position: absolute; bottom: 0; width: 100%; z-index: 100; box-shadow: 0 -5px 20px rgba(0,0,0,0.02); }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; width: 25%; }
        .nav-text { font-size: 10px; color: #ccc; font-weight: 600; transition: color 0.2s; }
        .nav-item.active .icon-svg { stroke: var(--text-main); fill: var(--primary-lime); stroke-width: 1.5; }
        .nav-item.active .nav-text { color: var(--text-main); }
        .nav-item:not(.active) .icon-svg { stroke: #ccc; }

    </style>
</head>
<body>

    <div class="mobile-frame">
        
        <div id="login-screen">
            <div class="login-logo-area">
                <div class="logo-container">
                    <div class="deco-blob blob-1" style="right:-20px;"></div>
                    <div class="blob-line"></div>
                    <h1 class="login-logo-text">Moa Now</h1>
                </div>
            </div>
            <div class="login-btn-group">
                <button class="login-btn btn-kakao" onclick="handleLogin()">
                    <svg class="icon-svg icon-sm" viewBox="0 0 24 24" style="fill:currentColor; stroke:none;"><path d="M12 3C5.373 3 0 7.03 0 12c0 2.93 1.874 5.53 4.824 7.22-.21.77-.767 2.82-.875 3.23-.138.52.192.51.4.34.265-.22 2.73-1.85 3.823-2.6.91.13 1.85.21 2.828.21 6.627 0 12-4.03 12-9s-5.373-9-12-9z"/></svg>
                    ì¹´ì¹´ì˜¤ë¡œ ì‹œì‘í•˜ê¸°
                </button>
                <button class="login-btn btn-google" onclick="handleLogin()">
                    <svg class="icon-svg icon-sm" viewBox="0 0 24 24" style="fill:none; stroke:currentColor;"><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" /><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" /><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" /><path d="M23 12c0-.82-.07-1.6-.2-2.36H12v4.73h6.18c-.27 1.44-1.08 2.66-2.3 3.48v2.86h3.73c2.18-2.01 3.43-4.97 3.39-8.71z" /></svg>
                    Googleë¡œ ê³„ì†í•˜ê¸°
                </button>
                <button class="login-btn btn-apple" onclick="handleLogin()">
                    <svg class="icon-svg icon-sm" viewBox="0 0 24 24" style="fill:currentColor; stroke:none;"><path d="M17.05 19.33c-.6.89-1.24 1.75-2.23 1.77-.98.02-1.29-.58-2.42-.58-1.12 0-1.47.57-2.41.6-1.04.03-1.84-1.05-2.5-2.02-1.35-1.95-2.38-5.54-.95-8.02.71-1.23 1.97-2.01 3.33-2.03 1.05-.02 2.04.71 2.69.71.64 0 1.84-.88 3.1-.75 1.05.08 2 .71 2.64 1.64-2.32 1.12-1.94 4.39.46 5.36-.2.52-.46 1.04-.71 1.53zM15.27 6.47c.57-1.25.27-2.99-.97-4.08-1.13-.92-2.9-.73-3.5.61-.54 1.22-.21 3.03.96 4.07 1.18 1.06 2.96.72 3.51-.6z"/></svg>
                    Appleë¡œ ê³„ì†í•˜ê¸°
                </button>
                <button class="login-btn btn-email" onclick="handleLogin()">
                    <svg class="icon-svg icon-sm" viewBox="0 0 24 24" style="fill:none; stroke:currentColor;"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    ì´ë©”ì¼ë¡œ ê³„ì†í•˜ê¸°
                </button>
            </div>
            <div class="guest-login" onclick="handleLogin()">ê²ŒìŠ¤íŠ¸ë¡œ ë‘˜ëŸ¬ë³´ê¸°</div>
            <div class="policy-check">
                <input type="checkbox" id="policyAgree" class="policy-checkbox">
                <label for="policyAgree">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
            </div>
        </div>

        <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
        <div class="sidebar" id="notificationSidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">ì•Œë¦¼ ì„¼í„°</div>
                <div class="close-btn" onclick="toggleSidebar()">âœ•</div>
            </div>
            <div class="noti-item">
                <div class="noti-icon-box" style="color:var(--primary-lime); background:#111;">ğŸ†</div>
                <div><h4>ì ìˆ˜ ìƒìŠ¹!</h4><p>ì–´ì œë³´ë‹¤ ì ìˆ˜ê°€ 3ì  ì˜¬ëìŠµë‹ˆë‹¤.</p></div>
            </div>
            <div class="noti-item">
                <div class="noti-icon-box" style="color:#2196F3;">ğŸ’§</div>
                <div><h4>ë¬¼ ë§ˆì‹œê¸°</h4><p>ìˆ˜ë¶„ ì„­ì·¨ ì‹œê°„ì…ë‹ˆë‹¤.</p></div>
            </div>
        </div>

        <div id="confirmModal" class="modal-overlay">
            <div class="modal-box">
                <div class="modal-title">ì§€ê¸ˆ ì‹¤ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</div>
                <div class="modal-desc">ì˜¤ëŠ˜ì˜ ì‹¤ì²œ ê¸°ë¡ì— ì¶”ê°€ë©ë‹ˆë‹¤.</div>
                <div class="modal-btns">
                    <button class="modal-btn btn-cancel" onclick="closeModals()">ì·¨ì†Œ</button>
                    <button class="modal-btn btn-confirm" onclick="processAction()">ì‹¤ì²œ</button>
                </div>
            </div>
        </div>
        
        <div id="successModal" class="modal-overlay">
            <div class="modal-box">
                <div class="checkmark-circle"><span class="checkmark">âœ”</span></div>
                <div class="modal-title">ì‹¤ì²œ ì™„ë£Œ!</div>
                <div class="modal-desc">ë©‹ì§„ ì‹œì‘ì…ë‹ˆë‹¤!<br>ì ìˆ˜ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
            </div>
        </div>

        <div id="addRoutineModal" class="modal-overlay">
            <div class="modal-box">
                <div class="modal-title">ìƒˆ ë£¨í‹´ ì¶”ê°€</div>
                <div class="add-box" style="flex-direction:column; gap:10px; box-shadow:none; background:none; padding:0; margin-bottom:20px;">
                    <select id="categorySelect" class="add-select" onchange="checkNewCategory(this)">
                        <option value="morning">â˜€ï¸ Morning Routine</option>
                        <option value="night">ğŸŒ™ Night Routine</option>
                        <option value="new">+ ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€</option>
                    </select>
                    <input type="text" id="newCategoryInput" class="add-text-input" style="display:none; margin-bottom:10px;" placeholder="ì¹´í…Œê³ ë¦¬ ì´ë¦„ ì…ë ¥">
                    
                    <input type="time" id="routineTimeInput" class="add-time-input" style="width:100%;">
                    <input type="text" id="routineNameInput" class="add-text-input" placeholder="ë£¨í‹´ ì´ë¦„ (ì˜ˆ: ì•„ì¹¨ ìŠ¤íŠ¸ë ˆì¹­)">
                </div>
                <div class="modal-btns">
                    <button class="modal-btn btn-cancel" onclick="closeModals()">ì·¨ì†Œ</button>
                    <button class="modal-btn btn-confirm" onclick="addRoutine()">ì¶”ê°€</button>
                </div>
            </div>
        </div>

        <div id="historyModal" class="modal-overlay">
            <div class="modal-box" style="text-align:left;">
                <div class="modal-title" style="text-align:center; margin-bottom:15px;">ì˜¤ëŠ˜ì˜ ì‹¤ì²œ ê¸°ë¡</div>
                <div id="historyList" class="quick-action-list" style="display:flex; flex-direction:column; gap:10px; max-height:300px; overflow-y:auto;">
                    </div>
                <div class="modal-btns" style="margin-top:20px;">
                    <button class="modal-btn btn-cancel" onclick="closeModals()">ë‹«ê¸°</button>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <span>11:55</span>
            <span>LTE</span>
        </div>

        <div id="home" class="content-area tab-content active">
            <div class="header-row">
                <div class="logo-container">
                    <div class="deco-blob blob-1"></div>
                    <div class="blob-line"></div>
                    <h1 class="page-title">Moa Now</h1>
                </div>
                <div class="noti-btn" onclick="toggleSidebar()">
                    <div class="noti-dot"></div>
                    <svg class="icon-svg" style="color:#333;" viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                </div>
            </div>

            <div class="main-score-card-new" onclick="switchTab('score', document.getElementById('nav-score'))">
                <div class="main-score-title">ì˜¤ëŠ˜ì˜ ë¼ì´í”„ ì ìˆ˜</div>
                <div class="main-gauge-container">
                    <svg class="main-gauge-svg" viewBox="0 0 160 160">
                        <circle class="main-gauge-bg" cx="80" cy="80" r="70"></circle>
                        <circle class="main-gauge-fill" cx="80" cy="80" r="70"></circle>
                    </svg>
                    <div class="main-score-value">
                        <div class="score-num-big">64</div>
                        <div class="score-unit-text">ì </div>
                    </div>
                </div>
                <div class="score-trend-badge">
                    <svg class="icon-svg icon-sm" style="width:14px; height:14px;" viewBox="0 0 24 24"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                    ìƒìŠ¹ì¤‘
                </div>
            </div>

            <div class="now-card" id="homeNowFeedCard">
                <div class="now-badge">NOW FEED</div>
                <div class="now-title" id="homeNowFeedTitle">ì ì‹¬ ì‹ì‚¬ í›„,<br><span style="color:var(--primary-lime)">ê°€ë²¼ìš´ ì‚°ì±…</span> ì–´ë•Œìš”? ğŸƒâ€â™‚ï¸</div>
                <button class="action-btn" onclick="openConfirmModal()">ì§€ê¸ˆ ì‹¤ì²œí•˜ê¸°</button>
            </div>

            <div class="section-title">ì˜¤ëŠ˜ì˜ ë£¨í‹´</div>
            <div id="homeRoutineList">
                </div>
        </div>

        <div id="routine" class="content-area tab-content">
            <div class="header-row"><div class="logo-container"><div class="blob-line"></div><h1 class="page-title">My Routine</h1></div></div>
            
            <div class="routine-week-tracker">
                <div class="week-day-col" onclick="selectRoutineDay(this, 0)"><div class="wd-name">ì›”</div><div class="wd-circle filled">24</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 1)"><div class="wd-name">í™”</div><div class="wd-circle filled">25</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 2)"><div class="wd-name">ìˆ˜</div><div class="wd-circle filled">26</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 3)"><div class="wd-name">ëª©</div><div class="wd-circle filled">27</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 4)"><div class="wd-name">ê¸ˆ</div><div class="wd-circle">28</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 5)"><div class="wd-name">í† </div><div class="wd-circle">29</div></div>
                <div class="week-day-col" onclick="selectRoutineDay(this, 6)"><div class="wd-name">ì¼</div><div class="wd-circle">30</div></div>
            </div>

            <div class="routine-dashboard">
                <div class="routine-progress-outer"><div class="routine-progress-inner"><div class="emoji-center">ğŸ”¥</div></div></div>
                <div style="font-size:14px; color:#aaa; margin-bottom:5px;">ì˜¤ëŠ˜ì˜ ë‹¬ì„±ë¥ </div>
                <div style="font-size:24px; font-weight:800; color:var(--primary-lime);">75%</div>
            </div>

            <div id="routineContainer"></div>

            <div class="now-card" style="margin-top: 30px;" id="routineNowFeedCard">
                <div class="now-badge">NOW FEED</div>
                <div class="now-title" id="routineNowFeedTitle">ì˜¤ëŠ˜ì˜ <span style="color:var(--primary-lime)">ì‹¤ì²œ ê¸°ë¡</span>ì„ í™•ì¸í•´ë³´ì„¸ìš”!</div>
                <button class="action-btn" onclick="openHistoryModal()">ê¸°ë¡ í™•ì¸í•˜ê¸° â€º</button>
            </div>

            <div class="fab-btn" onclick="openAddRoutineModal()">+</div>
        </div>

        <div id="score" class="content-area tab-content">
            <div class="header-row"><div class="logo-container"><div class="blob-line"></div><h1 class="page-title">My Score</h1></div></div>
            <div class="score-hero-dark">
                <div class="score-hero-left">
                    <h2>ì¢…í•© ë°¸ëŸ°ìŠ¤ ì ìˆ˜</h2>
                    <div class="big-score">64<span>ì </span></div>
                    <div class="score-change">ì–´ì œë³´ë‹¤ 3ì  ìƒìŠ¹</div>
                </div>
                <div class="score-gauge-box">
                    <svg class="score-gauge-svg" viewBox="0 0 100 100">
                        <circle class="gauge-bg" cx="50" cy="50" r="40"></circle>
                        <circle class="gauge-fill" cx="50" cy="50" r="40"></circle>
                    </svg>
                </div>
            </div>
            <div class="score-grid">
                <div class="stat-card"><div class="stat-icon" style="background:#e3f2fd; color:var(--color-sleep);">ğŸ˜´</div><div class="stat-name">ìˆ˜ë©´</div><div class="stat-val-row"><div class="stat-val">72ì </div></div><div class="stat-bar-bg"><div class="stat-bar-fill" style="width:72%; background:var(--color-sleep);"></div></div></div>
                <div class="stat-card"><div class="stat-icon" style="background:#fff3e0; color:var(--color-focus);">ğŸ”¥</div><div class="stat-name">Now Feed</div><div class="stat-val-row"><div class="stat-val">85ì </div></div><div class="stat-bar-bg"><div class="stat-bar-fill" style="width:85%; background:var(--color-focus);"></div></div></div>
                <div class="stat-card"><div class="stat-icon" style="background:#f3e5f5; color:var(--color-routine);">ğŸ“…</div><div class="stat-name">ëˆê¸°</div><div class="stat-val-row"><div class="stat-val">55ì </div></div><div class="stat-bar-bg"><div class="stat-bar-fill" style="width:55%; background:var(--color-routine);"></div></div></div>
                <div class="stat-card"><div class="stat-icon" style="background:#e8f5e9; color:var(--color-detox);">âœ”</div><div class="stat-name">ë£¨í‹´</div><div class="stat-val-row"><div class="stat-val">40ì </div></div><div class="stat-bar-bg"><div class="stat-bar-fill" style="width:40%; background:var(--color-detox);"></div></div></div>
            </div>
            <div class="trend-box">
                <div class="box-header"><div class="box-title">ì£¼ê°„ íŠ¸ë Œë“œ</div></div>
                <div class="graph-area">
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:40%;"></div></div><div class="day-label">ì›”</div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:55%;background:var(--text-main);"></div></div><div class="day-label" style="color:var(--text-main); font-weight:700;">í™”</div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:64%; "></div></div><div class="day-label">ìˆ˜</div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:50%;"></div></div><div class="day-label">ëª©</div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:70%;"></div></div><div class="day-label">ê¸ˆ</div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:85%;"></div></div><div class="day-label">í† </div></div>
                    <div class="graph-col"><div class="bar-bg"><div class="bar-fill" style="--h:60%;"></div></div><div class="day-label">ì¼</div></div>
                </div>
            </div>
            <div class="ai-box-new">
                <div class="ai-icon-new"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></div>
                <div class="ai-text-new">"ìˆ˜ë©´ ì ìˆ˜ê°€ ë‚®ì•„ <strong>ë””ì§€í„¸ ë””í†¡ìŠ¤</strong> ì ìˆ˜ì—ë„ ì˜í–¥ì„ ì£¼ê³  ìˆì–´ìš”. ì˜¤ëŠ˜ì€ SNS ì‚¬ìš©ì„ 30ë¶„ ì¤„ì—¬ë³´ì„¸ìš”."</div>
            </div>
            <div class="ai-report-banner"><div class="ai-report-icon">ğŸ“ˆ</div><div class="ai-report-text"><h4>AI ì£¼ê°„ ë¦¬í¬íŠ¸ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤!</h4><p>ì§€ë‚œì£¼ ë£¨í‹´ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p></div></div>
        </div>

        <div id="my" class="content-area tab-content">
            <div class="header-row">
                <div class="logo-container" style="display:flex; align-items:center;">
                    <span class="header-back-btn" id="myBackBtn" onclick="closeSubPage()">
                        <svg class="icon-svg" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    </span>
                    <h1 class="page-title" id="myPageTitle">My Page</h1>
                </div>
            </div>

            <div id="my-main-view">
                <div class="profile-header">
                    <div class="profile-img">
                        <svg class="icon-svg" style="width:32px; height:32px;" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    </div>
                    <div class="profile-info">
                        <h2>ì‚¬ìš©ì</h2>
                        <div class="profile-status">ì˜¤ëŠ˜ë„ í™”ì´íŒ…! ğŸ’ª</div>
                        <p style="font-size:13px; color:#777;">moa-user@example.com</p>
                    </div>
                </div>

                <div class="premium-card" onclick="alert('í”„ë¦¬ë¯¸ì—„ ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤ (ì¤€ë¹„ì¤‘)')">
                    <div class="premium-left">
                        <div class="premium-title-row">
                            <span style="color:var(--primary-lime)">Premium</span> Plan
                            <span class="pro-badge">PRO</span>
                        </div>
                        <div class="premium-sub">AI ì •ë°€ ë¶„ì„ & ë¬´ì œí•œ ë£¨í‹´</div>
                    </div>
                    <div class="premium-arrow">
                        <svg class="icon-svg" style="stroke:white;" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </div>
                </div>

                <div class="menu-list">
                    <div class="menu-item" onclick="openSubPage('profile-edit', 'í”„ë¡œí•„ ìˆ˜ì •')"><div class="menu-left"><div class="menu-icon-box"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div>í”„ë¡œí•„ ìˆ˜ì •</div></div>
                    <div class="menu-item" onclick="openSubPage('noti-settings', 'ì•Œë¦¼ ì„¤ì •')"><div class="menu-left"><div class="menu-icon-box"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></div>ì•Œë¦¼ ì„¤ì •</div></div>
                    <div class="menu-item" onclick="openSubPage('security', 'ê³„ì • ë° ë³´ì•ˆ')"><div class="menu-left"><div class="menu-icon-box"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></div>ê³„ì • ë° ë³´ì•ˆ</div></div>
                    <div class="menu-item" onclick="openSubPage('theme', 'í…Œë§ˆ ì„¤ì •')"><div class="menu-left"><div class="menu-icon-box"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg></div>í…Œë§ˆ ì„¤ì •</div></div>
                </div>
                <div class="menu-list">
                    <div class="menu-item" onclick="openSubPage('app-info', 'ì•± ì •ë³´')"><div class="menu-left"><div class="menu-icon-box"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div>ì•± ì •ë³´</div></div>
                    <div class="menu-item"><div class="menu-left" style="color:#FF5252;"><div class="menu-icon-box" style="background:#ffebee; color:#FF5252;"><svg class="icon-svg icon-sm" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></div>ë¡œê·¸ì•„ì›ƒ</div></div>
                </div>
            </div>

            <div id="my-sub-view" style="display:none;">
                <div id="profile-edit" class="my-sub-page">
                    <div style="text-align:center; margin-bottom:30px;"><div class="profile-img" style="width:100px; height:100px; margin:0 auto 15px;"><svg class="icon-svg" style="width:50px; height:50px;" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div><div style="color:var(--primary-lime-dark); font-weight:600; font-size:14px;">ì‚¬ì§„ ë³€ê²½</div></div>
                    <div class="setting-group"><label class="setting-label">ì´ë¦„</label><input type="text" class="setting-input" value="ì‚¬ìš©ì"></div>
                    <div class="setting-group"><label class="setting-label">ìƒíƒœ ë©”ì‹œì§€</label><input type="text" class="setting-input" value="ì˜¤ëŠ˜ë„ í™”ì´íŒ…! ğŸ’ª"></div>
                    <button class="setting-btn" onclick="closeSubPage()">ì €ì¥í•˜ê¸°</button>
                </div>
                <div id="noti-settings" class="my-sub-page"><div class="menu-list"><div class="toggle-row" style="padding:15px 20px;"><span>ì „ì²´ ì•Œë¦¼</span><label class="toggle-switch"><input type="checkbox" class="toggle-input" checked><span class="toggle-slider"></span></label></div></div></div>
                <div id="security" class="my-sub-page"><div class="menu-list"><div class="menu-item" style="padding:15px 20px;"><div>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</div></div></div></div>
                <div id="theme" class="my-sub-page"><div class="menu-list"><div class="toggle-row" style="padding:15px 20px;"><span>ë‹¤í¬ ëª¨ë“œ</span><label class="toggle-switch"><input type="checkbox" class="toggle-input"><span class="toggle-slider"></span></label></div></div></div>
                <div id="app-info" class="my-sub-page"><div class="menu-list" style="text-align:center; padding:30px;"><div style="color:#888; margin-bottom:20px;">Version 1.0.0</div></div></div>
            </div>
        </div>

        <nav>
            <div class="nav-item active" onclick="switchTab('home', this)"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg><span class="nav-text">í™ˆ</span></div>
            <div class="nav-item" onclick="switchTab('routine', this)"><svg class="icon-svg" viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg><span class="nav-text">ë£¨í‹´</span></div>
            <div class="nav-item" id="nav-score" onclick="switchTab('score', this)"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg><span class="nav-text">ìŠ¤ì½”ì–´</span></div>
            <div class="nav-item" onclick="switchTab('my', this)"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg><span class="nav-text">MY</span></div>
        </nav>
    </div>

    <script>
        // ìƒˆë¡œìš´ ì œì•ˆ ë¬¸êµ¬ ëª©ë¡
        const feedMessages = [
            "ì ì‹¬ ì‹ì‚¬ í›„,<br><span style='color:var(--primary-lime)'>ê°€ë²¼ìš´ ì‚°ì±…</span> ì–´ë•Œìš”? ğŸƒâ€â™‚ï¸",
            "ìˆ˜ë¶„ ë³´ì¶©ì„ ìœ„í•´,<br><span style='color:var(--primary-lime)'>ë¬¼ í•œ ì” ë§ˆì‹œê¸°</span> ì–´ë•Œìš”? ğŸ’§",
            "ëˆˆì˜ í”¼ë¡œë¥¼ í’€ê²Œ,<br><span style='color:var(--primary-lime)'>íœ´ëŒ€í° ì ì‹œ ë‚´ë ¤ë†“ê¸°</span> ì–´ë•Œìš”? ğŸ“µ",
            "ì—ë„ˆì§€ ì¶©ì „ì„ ìœ„í•´,<br><span style='color:var(--primary-lime)'>ë‚®ì  15ë¶„ ìê¸°</span> ì–´ë•Œìš”? ğŸ˜´"
        ];
        
        // í˜„ì¬ ë³´ì—¬ì¤„ ë¬¸êµ¬ (ì´ˆê¸°ê°’: ì‚°ì±…)
        let currentFeedMessage = feedMessages[0];

        function handleLogin() {
            const checkbox = document.getElementById('policyAgree');
            if(!checkbox.checked) {
                alert('ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
                return;
            }
            const loginScreen = document.getElementById('login-screen');
            loginScreen.style.opacity = '0';
            loginScreen.style.pointerEvents = 'none';
            setTimeout(() => {
                loginScreen.style.display = 'none';
            }, 500);
        }

        let categories = [
            { id: 'morning', title: 'â˜€ï¸ Morning Routine' },
            { id: 'night', title: 'ğŸŒ™ Night Routine' }
        ];

        let routineData = [
            { id: 1, text: "ì´ë¶ˆ ì •ë¦¬í•˜ê¸°", time: "ê¸°ìƒ ì§í›„", category: "morning", completed: false, icon: "ğŸ›ï¸" },
            { id: 2, text: "ì˜ì–‘ì œ ì„­ì·¨", time: "08:00 AM", category: "morning", completed: false, icon: "ğŸ¥—" },
            { id: 3, text: "ë…ì„œ 10ë¶„", time: "ìê¸° ì „", category: "night", completed: false, icon: "ğŸ“–" },
            { id: 4, text: "ë‚´ì¼ ê³„íš ì„¸ìš°ê¸°", time: "23:00 PM", category: "night", completed: false, icon: "ğŸ“" }
        ];
        
        let isNowFeedDone = false;
        let nowFeedHistory = [];

        function renderRoutines() {
            const homeList = document.getElementById('homeRoutineList');
            const routineContainer = document.getElementById('routineContainer');
            
            if(homeList) homeList.innerHTML = '';
            if(routineContainer) routineContainer.innerHTML = '';

            // 1. Home List
            routineData.forEach(item => {
                const checkedClass = item.completed ? 'done' : '';
                const playClass = item.completed ? 'completed' : '';
                
                const playIcon = item.completed ? 
                    '<svg class="icon-svg icon-sm" style="fill:none; stroke:currentColor; stroke-width:3; stroke-linecap:round; stroke-linejoin:round;" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>' : 
                    '<svg class="icon-svg icon-sm" style="fill:currentColor; stroke:none;" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>';

                const homeHtml = `
                    <div class="list-item-card ${item.completed ? 'checked-state' : ''}" onclick="toggleRoutine(${item.id})">
                        <div class="list-content">
                            <div class="routine-icon" style="width:36px; height:36px; font-size:18px;">${item.icon}</div>
                            <div class="content-text">${item.text}</div>
                        </div>
                        <div class="play-btn ${playClass}" style="margin-left:auto;">${playIcon}</div>
                    </div>
                `;
                if(homeList) homeList.insertAdjacentHTML('beforeend', homeHtml);
            });

            // 2. Routine Page List
            categories.forEach(cat => {
                const catItems = routineData.filter(r => r.category === cat.id);
                let itemsHtml = '';
                catItems.forEach(item => {
                    const checkedClass = item.completed ? 'done' : '';
                    const playClass = item.completed ? 'completed' : '';
                    const playIcon = item.completed ? 
                        '<svg class="icon-svg icon-sm" style="fill:none; stroke:currentColor; stroke-width:3; stroke-linecap:round; stroke-linejoin:round;" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>' : 
                        '<svg class="icon-svg icon-sm" style="fill:currentColor; stroke:none;" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>';

                    itemsHtml += `
                        <div class="routine-list-item ${checkedClass}">
                            <div class="routine-icon">${item.icon}</div>
                            <div class="routine-info">
                                <div class="routine-name">${item.text}</div>
                                <div class="routine-time">${item.time}</div>
                            </div>
                            <div class="delete-btn" onclick="deleteRoutine(${item.id})">
                                <svg class="icon-svg icon-sm" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                            </div>
                            <div class="play-btn ${playClass}" onclick="toggleRoutine(${item.id})">${playIcon}</div>
                        </div>
                    `;
                });

                const sectionHtml = `
                    <div class="section-title">
                        <span id="cat-title-${cat.id}">${cat.title}</span>
                        <span class="edit-category-btn" onclick="editCategory('${cat.id}')">âœï¸</span>
                    </div>
                    <div id="list-${cat.id}">${itemsHtml}</div>
                `;
                if(routineContainer) routineContainer.insertAdjacentHTML('beforeend', sectionHtml);
            });
            
            const select = document.getElementById('categorySelect');
            if(select) {
                select.innerHTML = '';
                categories.forEach(c => {
                    select.innerHTML += `<option value="${c.id}">${c.title}</option>`;
                });
                select.innerHTML += `<option value="new">+ ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€</option>`;
            }

            updateNowFeedUI();
        }

        function toggleRoutine(id) {
            if(event.target.closest('.delete-btn')) return;
            const item = routineData.find(r => r.id === id);
            if(item) {
                item.completed = !item.completed;
                renderRoutines();
            }
        }

        function addRoutine() {
            const nameInput = document.getElementById('routineNameInput');
            const timeInput = document.getElementById('routineTimeInput');
            const catSelect = document.getElementById('categorySelect');
            const newCatInput = document.getElementById('newCategoryInput');
            
            const name = nameInput.value.trim();
            const timeVal = timeInput.value;
            let categoryId = catSelect.value;

            if (name) {
                if (categoryId === 'new') {
                    const newCatName = newCatInput.value.trim() || "ìƒˆ ì¹´í…Œê³ ë¦¬";
                    categoryId = 'cat_' + Date.now();
                    categories.push({ id: categoryId, title: newCatName });
                }

                let displayTime = "ì‹œê°„ ë¯¸ì •";
                let category = "morning"; 

                if(timeVal) {
                    const [h, m] = timeVal.split(':');
                    const hour = parseInt(h);
                    category = (hour >= 18 || hour < 5) ? "night" : "morning";
                    displayTime = `${h}:${m}`;
                }

                const newId = routineData.length > 0 ? Math.max(...routineData.map(r=>r.id)) + 1 : 1;
                
                routineData.push({
                    id: newId,
                    text: name,
                    time: displayTime,
                    category: categoryId,
                    completed: false,
                    icon: "âœ¨"
                });

                nameInput.value = '';
                newCatInput.value = '';
                closeModals();
                renderRoutines();
            }
        }

        function deleteRoutine(id) {
            if(confirm('ì´ ë£¨í‹´ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                routineData = routineData.filter(r => r.id !== id);
                renderRoutines();
            }
        }

        function checkNewCategory(select) {
            const input = document.getElementById('newCategoryInput');
            input.style.display = select.value === 'new' ? 'block' : 'none';
            if(select.value === 'new') input.focus();
        }

        function editCategory(id) {
            const cat = categories.find(c => c.id === id);
            const newName = prompt("ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ìˆ˜ì •í•˜ì„¸ìš”:", cat.title);
            if(newName) {
                cat.title = newName;
                renderRoutines();
            }
        }

        function openConfirmModal() {
            if(!isNowFeedDone) {
                document.getElementById('confirmModal').style.display = 'flex';
            }
        }

        // Action Process Logic with 5-second Reset
        function processAction() {
            closeModals();
            isNowFeedDone = true;
            
            // ê¸°ë¡ ì €ì¥ (HTML íƒœê·¸ ì œê±°í•˜ê³  í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ)
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = currentFeedMessage;
            const cleanText = tempDiv.innerText.replace(" ì–´ë•Œìš”? ğŸƒâ€â™‚ï¸", "").replace(" ì–´ë•Œìš”? ğŸ’§", "").replace(" ì–´ë•Œìš”? ğŸ“µ", "").replace(" ì–´ë•Œìš”? ğŸ˜´", "").replace("ì ì‹¬ ì‹ì‚¬ í›„,", "").replace("ìˆ˜ë¶„ ë³´ì¶©ì„ ìœ„í•´,", "").replace("ëˆˆì˜ í”¼ë¡œë¥¼ í’€ê²Œ,", "").replace("ì—ë„ˆì§€ ì¶©ì „ì„ ìœ„í•´,", "").trim();

            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            nowFeedHistory.unshift({ name: cleanText, time: timeString });

            updateNowFeedUI();

            const successModal = document.getElementById('successModal');
            successModal.style.display = 'flex';
            setTimeout(() => { successModal.style.display = 'none'; }, 2000);

            // 5ì´ˆ ë’¤ì— ë¦¬ì…‹ ë° ìƒˆë¡œìš´ ë©”ì‹œì§€ë¡œ ë³€ê²½
            setTimeout(() => {
                isNowFeedDone = false;
                
                // ëœë¤ ë©”ì‹œì§€ ì„ íƒ
                const randomIndex = Math.floor(Math.random() * feedMessages.length);
                currentFeedMessage = feedMessages[randomIndex];
                
                updateNowFeedUI(); // UI ì—…ë°ì´íŠ¸
            }, 5000);
        }

        function updateNowFeedUI() {
            const homeCard = document.getElementById('homeNowFeedCard');
            
            if(homeCard) {
                if(isNowFeedDone) {
                    homeCard.classList.add('done-state');
                    homeCard.querySelector('.now-title').innerHTML = "ì˜¤ëŠ˜ì˜ ì‹¤ì²œì„ <span style='color:white'>ì™„ë£Œ</span>í–ˆìŠµë‹ˆë‹¤!";
                    homeCard.querySelector('.action-btn').innerText = "ì™„ë£Œë¨ âœ”";
                } else {
                    homeCard.classList.remove('done-state');
                    homeCard.querySelector('.now-title').innerHTML = currentFeedMessage;
                    homeCard.querySelector('.action-btn').innerText = "ì§€ê¸ˆ ì‹¤ì²œí•˜ê¸°";
                }
            }
        }

        function openHistoryModal() {
            const container = document.getElementById('historyList');
            if (nowFeedHistory.length === 0) {
                container.innerHTML = `
                    <div style="text-align:center; padding:30px 0; color:#888;">
                        <div style="font-size:40px; margin-bottom:10px;">ğŸ“</div>
                        <div>ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                    </div>
                `;
            } else {
                container.innerHTML = nowFeedHistory.map(item => `
                    <div class="quick-action-item" style="cursor:default;">
                        <span class="qa-icon">âœ…</span>
                        <div style="display:flex; flex-direction:column;">
                            <span class="qa-text">${item.name}</span>
                            <span style="font-size:12px; color:#888;">${item.time}</span>
                        </div>
                    </div>
                `).join('');
            }
            document.getElementById('historyModal').style.display = 'flex';
        }

        function switchTab(tabId, navElement) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            if(navElement) navElement.classList.add('active');
            if(tabId === 'routine') initRoutineSelection();
        }

        function openSubPage(pageId, title) {
            document.getElementById('my-main-view').style.display = 'none';
            document.getElementById('my-sub-view').style.display = 'block';
            document.querySelectorAll('.my-sub-page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.getElementById('myPageTitle').innerText = title;
            document.getElementById('myBackBtn').style.display = 'block';
        }

        function closeSubPage() {
            document.getElementById('my-sub-view').style.display = 'none';
            document.getElementById('my-main-view').style.display = 'block';
            document.getElementById('myPageTitle').innerText = 'My Page';
            document.getElementById('myBackBtn').style.display = 'none';
        }

        function toggleSidebar() {
            document.getElementById('notificationSidebar').classList.toggle('active');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }

        function openAddRoutineModal() { document.getElementById('addRoutineModal').style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
        
        function initRoutineSelection() {
            const dayIndex = new Date().getDay(); 
            let uiIndex = dayIndex - 1;
            if (uiIndex < 0) uiIndex = 6; 
            const cols = document.querySelectorAll('.week-day-col');
            cols.forEach(c => c.classList.remove('selected'));
            if(cols[uiIndex]) cols[uiIndex].classList.add('selected');
        }

        function selectRoutineDay(el, index) {
            document.querySelectorAll('.week-day-col').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
        }

        renderRoutines();
    </script>
</body>
</html>
